{% extends "base.html" %} {% block title %}Login{% endblock %} {% block content
%}
<div class="justify-content-center container m-auto mt-lg-5 mt-md-3 mt-sm-1">
  <table class="table table-striped">
    <tbody>
      <tr>
        <td><h4>Name</h4></td>
        <td>
          <form method="POST" class="form-inline flex-nowrap">
            <input
              type="text"
              name="name"
              class="form-control-plaintext"
              value="{{ user.first_name }} {{ user.last_name }}"
            />
          </form>
        </td>
      </tr>
      <tr>
        <td><h4>Email</h4></td>
        <td>
          <form method="POST" class="form-inline flex-nowrap">
            <input
              type="text"
              name="email"
              class="form-control-plaintext"
              value="{{ user.email }}"
            />
          </form>
        </td>
      </tr>
      <tr>
        <td><h4>Wohnort</h4></td>
        <td>
          <form method="POST" class="form-inline flex-nowrap">
            <input
              type="text"
              name="location"
              class="form-control-plaintext"
              value="{{ user.location.post_code }} {{user.location.city.name }}"
            />
          </form>
        </td>
      </tr>
      <tr>
        <td><h4>Deine Beschreibung</h4></td>
      </tr>
    </tbody>
  </table>
  <form
    method="POST"
    onsubmit="document.getElementsByName('description')[0].value = document.getElementById('description').value;"
  >
    <textarea id="description" class="form-control" rows="5">
{{ user.description }}</textarea
    >
  </form>
  <table class="table table-striped">
    <thead>
      <tr>
        <td scope="col">Montag</td>
        <td scope="col">Dienstag</td>
        <td scope="col">Mittwoch</td>
        <td scope="col">Donnerstag</td>
        <td scope="col">Freitag</td>
        <td scope="col">Samstag</td>
        <td scope="col">Sonntag</td>
      </tr>
    </thead>
    <tbody id="timeblock_body"></tbody>
    <script type="text/javascript">
      let tobody = document.getElementById("timeblock_body");
    </script>
  </table>
</div>
<script>
  let create_submit = function create_submit() {
    let submit = document.createElement("input");
    submit.type = "submit";
    submit.value = "Speichern";
    submit.classList.add("btn", "btn-primary");
    return submit;
  };
  let inputs = document.getElementsByClassName("form-control-plaintext");
  for (let input of inputs) {
    input.addEventListener(
      "input",
      function add_submit() {
        input.parentElement.appendChild(create_submit());
      },
      { once: true }
    );
  }
  let description_textarea = document.getElementById("description");
  description_textarea.addEventListener(
    "input",
    function () {
      let hidden = document.createElement("input");
      hidden.type = "hidden";
      hidden.name = "description";
      let submit = create_submit();
      description_textarea.parentElement.appendChild(hidden);
      description_textarea.parentElement.appendChild(submit);
    },
    { once: true }
  );
</script>
{% endblock %}
